import React from 'react';
import BaseComponent from '../../components/BaseComponent';
import SVG from '../../components/SVG';

class CommentIcon extends BaseComponent {
  constructor(props) {
    super(props);
    this._play = this._play.bind(this);
  }

  render() {
    return (
      <SVG className='SVG-icon CommentIcon' fallbackIcon='icon-comments-circled'>
        <circle className='SVG-fill' cx={SVG.ICON_SIZE / 2} cy={SVG.ICON_SIZE / 2} r={SVG.ICON_SIZE / 2}/>
        <g ref='right'>
          <path className='SVG-fill-bg' d='M12.130859,14.142578h-1.928711c-2.087402,0-3.785645-1.698242-3.785645-3.785645 C6.416504,8.198242,8.114746,6.5,10.202148,6.5h2.928711c2.086914,0,3.785156,1.698242,3.785156,3.785645 c0,1.069824-0.384766,2.01123-1.083008,2.722168c-0.146484,0.150391-3.277344,3.207031-3.277344,3.207031l-0.424805,0.415039 V14.142578z'/>
          <path className='SVG-fill' d='M13.13063,6.749998c1.952721,0,3.535709,1.58299,3.535709,3.53572v0.071429 c0,0.9643-0.38604,1.83844-1.012009,2.476311c-0.14674,0.14954-3.273701,3.202259-3.273701,3.202259v-2.142859h-2.178579 c-1.952721,0-3.53571-1.583-3.53571-3.53571v-0.071429c0-1.95273,1.58299-3.53572,3.53571-3.53572H13.13063 M13.13063,6.249998 h-2.928579c-2.2253,0-4.03571,1.81042-4.03571,4.03572v0.071429c0,2.225301,1.81041,4.03571,4.03571,4.03571h1.678579v1.642859 v1.18689l0.84928-0.829109c0.12784-0.124809,3.13251-3.05822,3.281301-3.20984 c0.744888-0.75906,1.155128-1.76287,1.155128-2.82651v-0.071429C17.16634,8.060417,15.355931,6.249998,13.13063,6.249998 L13.13063,6.249998z'/>
          <rect x='8.687174' y='13.892859' className='SVG-fill' width='3.693452' height='2.142857'/>
        </g>
        <g>
          <path className='SVG-fill-bg' d='M10.464355,13.267578H8.535645c-2.087402,0-3.785645-1.698242-3.785645-3.785645 C4.75,7.323242,6.448242,5.625,8.535645,5.625h2.928223C13.551758,5.625,15.25,7.323242,15.25,9.410645 c0,1.069336-0.384766,2.01123-1.083008,2.722168c-0.147461,0.150391-3.277832,3.207031-3.277832,3.207031l-0.424805,0.415039 V13.267578z'/>
          <path className='SVG-fill' d='M11.464127,5.874998c1.952721,0,3.53571,1.58299,3.53571,3.53572v0.071429 c0,0.9643-0.38604,1.83844-1.01201,2.476311c-0.14674,0.14954-3.273701,3.20226-3.273701,3.20226v-2.14286H8.535547 c-1.95272,0-3.53571-1.583-3.53571-3.53571V9.410718c0-1.95273,1.58299-3.53572,3.53571-3.53572H11.464127 M11.464127,5.374998 H8.535547c-2.2253,0-4.03571,1.81042-4.03571,4.03572v0.071429c0,2.225301,1.81041,4.03571,4.03571,4.03571h1.678579v1.64286 v1.186889l0.84928-0.829109c0.12784-0.12481,3.13251-3.05822,3.2813-3.20984c0.74489-0.75906,1.15513-1.76287,1.15513-2.82651 V9.410718C15.499837,7.185418,13.689427,5.374998,11.464127,5.374998L11.464127,5.374998z'/>
          <rect x='7.02067' y='13.017859' className='SVG-fill' width='3.693452' height='2.142857'/>
        </g>
        <g ref='left'>
          <path className='SVG-fill-bg' d='M8.797852,12.392578H6.869141c-2.087402,0-3.785645-1.698242-3.785645-3.785645 C3.083496,6.448242,4.781738,4.75,6.869141,4.75h2.928711c2.086914,0,3.785156,1.698242,3.785156,3.785645 c0,1.069824-0.384766,2.01123-1.083008,2.722168c-0.146484,0.150391-3.277344,3.207031-3.277344,3.207031l-0.424805,0.415039 V12.392578z'/>
          <path className='SVG-fill' d='M9.797623,4.999998c1.952721,0,3.53571,1.58299,3.53571,3.53572v0.071429 c0,0.9643-0.38604,1.83844-1.01201,2.476311c-0.14674,0.14954-3.273701,3.20226-3.273701,3.20226v-2.14286h-2.17858 c-1.95272,0-3.53571-1.583-3.53571-3.53571V8.535718c0-1.95273,1.58299-3.53572,3.53571-3.53572H9.797623 M9.797623,4.499998 h-2.92858c-2.2253,0-4.03571,1.81042-4.03571,4.03572v0.071429c0,2.225301,1.81041,4.03571,4.03571,4.03571h1.67858v1.64286 v1.18689l0.84928-0.82911c0.12784-0.12481,3.13251-3.05822,3.2813-3.20984c0.74489-0.75906,1.15513-1.76287,1.15513-2.82651 V8.535718C13.833333,6.310418,12.022923,4.499998,9.797623,4.499998L9.797623,4.499998z'/>
          <rect x='5.354167' y='12.142859' className='SVG-fill' width='3.693452' height='2.142857'/>
        </g>
      </SVG>
    );
  }

  componentWillReceiveProps(nextProps) {
    if (!SVG.ENABLED) {
      return;
    }
    var played = nextProps.played;
    if (typeof played !== 'undefined' && played !== this.props.played) {
      this._play(played);
    }
  }

  _timeline() {
    if (!this._tl) {
      this._tl = new TimelineLite({paused: true});
      this._tl.add(TweenLite.to(this.refs.left.getDOMNode(), 0.2, {x: '-14%', y: '-7%'}));
      this._tl.add(TweenLite.to(this.refs.right.getDOMNode(), 0.2, {x: '14%', y: '7%'}), 0);
    }
    return this._tl;
  }

  _play(bool) {
    if (bool) {
      this._timeline().play();
    } else {
      this._timeline().reverse();
    }
  }
}

CommentIcon.defaultProps = {
  played: false,
};

CommentIcon.propTypes = {
  played: React.PropTypes.bool,
};

export default CommentIcon;
